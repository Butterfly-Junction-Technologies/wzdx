# CREATING THE FEED

### Supported Data File Types
The WZDx-v1 data feed will be specified as an XML file or a JSON file. Both JSON and XML have been choosen as the file types of choice because of their lighweight data exchange format, are easy for humans to read and write, and are easy for machines to parse and generate. 

The file will contain one or more work zone activity entries. A work zone activity entry is defined as a description of work zone characteristics for a road segment along a single roadway in a single direction. The WorkZoneActivity data frame is composed of the common core data dictionary elements (Table 1) and depicted in Figure 1.

#### Figure 1: Work Zone Activity Organization
*Note*: not all optional data elements are included in secondary levels of the hierarchy
![Fig. 1](https://github.com/acosta-dani-bah/ITS-JPO-wzdx/blob/master/images/Figure%201.png)


### Code Examples
The WZDx Activity frame code examples presented below were extracted from existing data feeds generated by several open data sites. These examples use the following sample work zone activity template:

#### Sample Work Zone Activity Template
| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tag &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Value &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |
| --------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------- |
| Identifier                                                                              |                                                                                           |
| subidentifier                                                                           |                                                                                           |
| StartDateTime<ul><li>startDateTime-est</li><li>startDateTime-ver</li></ul>              |                                                                                           |
| EndDateTime<ul><li>endDateTime-est</li><li>endDateTime-ver</li></ul>                    |                                                                                           |
| BeginLocation<ul><li>roadName</li><li>roadNum</li><li>latitude</li><li>longitude</li><li>milepost</li></ul> |                                                                       |
| EndLocation<ul><li>latitude</li><li>longitude</li><li>milepost</li></ul>                |                                                                                           |
| wz-Status                                                                               |                                                                                           |
| totalLanes                                                                              |                                                                                           |
| openLanes                                                                               |                                                                                           |
| closedLanes                                                                             |                                                                                           |
| closedShoulders                                                                         |                                                                                           |
| workersPresent                                                                          |                                                                                           |
| RoadRestrictions*<ul><li>roadRestrictions</li></ul>                                     |                                                                                           |
| description                                                                             |                                                                                           |
| issuingOrganization                                                                     |                                                                                           |
| timeStampEventCreation                                                                  |                                                                                           |
| timeStampEventUpdate                                                                    |                                                                                           |

Three examples of WorkZoneActivity records are shown below. They were derived from on-line data feeds including:
* MassDOT Event Feed – Example 1
* iCone Event Feed – Example 2
* Caltrans Lane Closure Feed – Example 3 



#### Example 2: iCone
Tag | Value
--- | -----
Identifier | 320
StartDateTime<ul><li>startDateTime-ver</li></ul> | 2015-01-07T16:50:56Z
EndDateTime<ul><li>endDateTime</li></ul> | n/a
BeginLocation<ul><li>roadName</li><li>roadNum</li><li>roadDirection</li><li>latitude</li><li>longitude</li><li>milepost</li></ul> | roadName: I-35<br>roadDirection: Northbound<br>latitude-ver: 31.0855180<br>longitude-ver: -97.4030700
EndLocation<ul><li>latitude</li><li>longitude</li><li>milepost</li></ul> | latitude-ver: 31.0855180<br>longitude-ver: -97.4030700
wz-Status | active
totalLanes | 3
openLanes | all
closedLanes | none
closedShoulders | outside
workersPresent | true
RoadRestrictions*<ul><li>roadRestrictions</li></ul> |
description | Long-term deployment near Temple
issuingOrganization | iCone
timeStampUpdate | 2018-01-17T22:32:00Z

#### Example 3: Caltrans
Tag | Value
--- | -----
Identifier | C299CA-0004-2016-04-12-00:01:00
StartDateTime<ul><li>startDateTime</li></ul> | startDateTime-ver: 2016-04-12T15:58:00
EndDateTime<ul><li>endDateTime</li></ul> | endDateTime-est: 2016-04-30T
BeginLocation<ul><li>roadName</li><li>roadNum</li><li>roadDirection</li><li>latitude</li><li>longitude</li><li>milepost</li></ul> | roadName: CA-299<br>roadDirection: East<br>latitude-est: 40.635122<br>longitude-est: -122.733841<br>milepost-est: 114.190T23:59:00
EndLocation<ul><li>latitude</li><li>longitude</li><li>milepost</li></ul> | latitude-est: 40.67201<br>longitude-est: -122.654384<br>milepost-est: 121.633
wz-Status | Active
totalLanes | 2
openLanes | right
closedLanes | left
closedShoulders | Inside
workersPresent | True
RoadRestrictions*<ul><li>roadRestriction</li></ul> |
description | One lane closed on Route 299 East near Lewiston to French Gulch<br>(0.6 mi west of Crystal Creek Rd) for approximately 30 days.
issuingOrganization | Caltrans
timeStampCreation | 2016-04-12T00:01:00
timeStampUpdate | 2016-04-19T14:41:04

